{"version":3,"file":"modal-exercise-DW4_Sp5Z.js","sources":["../../src/js/api-functions.js","../../src/js/rating-modal.js","../../src/js/quote-api-localStorage.js","../../src/js/header.js","../../src/js/modal-exercise-markup.js","../../src/js/modal-class-box.js","../../src/js/modal-exercise.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://your-energy.b.goit.study/api/';\n\nexport async function fetchCategories(\n  filter = 'Muscles',\n  page = '1',\n  limit = '12'\n) {\n  const response = await axios.get(`/filters`, {\n    params: {\n      filter,\n      page,\n      limit,\n    },\n  });\n  return response.data;\n}\n\nexport async function fetchExercises(\n  currentFilter,\n  currentCategory,\n  keyword,\n  page = 1,\n  limit = 10\n) {\n  const response = await axios.get(`/exercises`, {\n    params: {\n      [currentFilter === 'Body parts'\n        ? 'bodypart'\n        : currentFilter.toLowerCase()]: currentCategory\n        .toLowerCase()\n        .replace(' ', '%20'),\n      keyword,\n      page,\n      limit,\n    },\n  });\n  return response.data;\n}\n\nexport async function fetchExerciseModalById(id = '64f389465ae26083f39b17a2') {\n  const response = await axios.get(`/exercises/${id}`);\n  return response.data;\n}\n\nexport async function sendRating(id, ratingData) {\n   \n    const response = await axios.patch(`/exercises/${id}/rating`, ratingData);\n    return response.data;\n}\n\n\n// https://your-energy.b.goit.study/api/filters?filter=Muscles&page=1&limit=12\n// https://your-energy.b.goit.study/api/exercises?bodypart=back&muscles=lats&equipment=barbell&keyword=pull&page=1&limit=10\n","import iziToast from 'izitoast';\nimport { sendRating } from './api-functions.js';\n\nconst RATING_MODAL_SELECTOR = '[data-modal-rating]';\nconst RATING_FORM_SELECTOR = '[data-rating-form]';\n\nconst refs = {\n  ratingModalBackdrop: document.querySelector(RATING_MODAL_SELECTOR),\n  closeRatingModalBtn: document.querySelector('[data-modal-rating-close]'),\n  ratingForm: document.querySelector(RATING_FORM_SELECTOR),\n  ratingStars: document.querySelector('.rating-stars'),\n  ratingValueSpan: document.querySelector('.rating-value'),\n  ratingRadios: document.querySelectorAll('.rating-radio'),\n};\n\nlet currentExerciseId = null;\nlet modalExerciseInstance = null;\nlet currentRating = 0;\n\nexport function openRatingModal(exerciseId, modalBoxInstance) {\n  if (!refs.ratingModalBackdrop) return;\n\n  currentExerciseId = exerciseId;\n  modalExerciseInstance = modalBoxInstance;\n\n  if (modalExerciseInstance && modalBoxInstance.instance) {\n    modalBoxInstance.instance.close();\n  }\n\n  refs.ratingModalBackdrop.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden';\n\n  resetRating();\n}\n\nfunction closeRatingModal() {\n  if (!refs.ratingModalBackdrop) return;\n\n  refs.ratingModalBackdrop.classList.add('is-hidden');\n  document.body.style.overflow = '';\n\n  if (modalExerciseInstance && modalExerciseInstance.instance) {\n    modalExerciseInstance.instance.show();\n  }\n\n  currentExerciseId = null;\n  modalExerciseInstance = null;\n  currentRating = 0;\n  refs.ratingForm.reset();\n}\n\nfunction updateRatingValue(rating) {\n  refs.ratingValueSpan.textContent = rating.toFixed(1);\n  currentRating = rating;\n}\n\nfunction handleStarChange(event) {\n  if (event.target.name === 'rating') {\n    const rating = parseFloat(event.target.value);\n    updateRatingValue(rating);\n  }\n}\n\nfunction resetRating() {\n  if (refs.ratingRadios.length > 0) {\n    refs.ratingRadios.forEach(radio => (radio.checked = false));\n  }\n  updateRatingValue(0.0);\n}\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n\n  const formData = new FormData(event.currentTarget);\n  const email = formData.get('email').trim();\n  const review = formData.get('review').trim();\n\n  if (currentRating === 0) {\n    iziToast.error({\n      message: 'Please give a rating before submitting.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  if (!email) {\n    iziToast.error({\n      message: 'Email field cannot be empty.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  if (!/^[\\w-]+(\\.[\\w-]+)*@([\\w-]+\\.)+[a-zA-Z]{2,7}$/.test(email)) {\n    iziToast.error({\n      message: 'Please enter a valid email address.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  const ratingData = {\n    rate: currentRating,\n    email: email,\n    review: review || '',\n  };\n\n  try {\n    await sendRating(currentExerciseId, ratingData);\n\n    iziToast.success({\n      message: 'Rating successfully sent! Thank you for your feedback.',\n      position: 'topRight',\n    });\n\n    closeRatingModal();\n  } catch (error) {\n    console.error('Rating submission failed:', error);\n    let errorMessage = 'Failed to submit rating. Please try again.';\n\n    if (error.response && error.response.status === 409) {\n      errorMessage = 'You have already rated this exercise.';\n    }\n\n    iziToast.error({\n      message: errorMessage,\n      position: 'topRight',\n    });\n  }\n}\n\nif (refs.ratingStars) {\n  refs.ratingStars.addEventListener('change', handleStarChange);\n}\n\nif (refs.ratingForm) {\n  refs.ratingForm.addEventListener('submit', handleFormSubmit);\n}\n\nif (refs.closeRatingModalBtn) {\n  refs.closeRatingModalBtn.addEventListener('click', closeRatingModal);\n}\n\nif (refs.ratingModalBackdrop) {\n  refs.ratingModalBackdrop.addEventListener('click', evt => {\n    if (evt.target === refs.ratingModalBackdrop) {\n      closeRatingModal();\n    }\n  });\n}\n\ndocument.addEventListener('keydown', evt => {\n  if (\n    evt.key === 'Escape' &&\n    refs.ratingModalBackdrop &&\n    !refs.ratingModalBackdrop.classList.contains('is-hidden')\n  ) {\n    closeRatingModal();\n  }\n});\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://your-energy.b.goit.study/api/';\n\n// АРІ for get data for the quote\nexport const getQuoteOfTheDay = async () => {\n  try {\n    const { data } = await axios.get('/quote');\n    console.log('Quote from API:', data);\n    return data;\n  } catch (error) {\n    console.error('Error fetching quote:', error);\n    throw error;\n  }\n};\n\n// Get today day\nexport const getTodayDate = () => {\n  return new Date().toISOString().split('T')[0];\n};\n\n// Get day for the quote\nexport const handleGetQuoteOfTheDay = async () => {\n  const storedQuote = JSON.parse(localStorage.getItem('quoteOfTheDay'));\n  const today = getTodayDate();\n\n  if (storedQuote && storedQuote.date === today) {\n    console.log(\"Already have today's quote:\", storedQuote);\n    return storedQuote;\n  }\n  const quote = await getQuoteOfTheDay();\n\n  const quoteWithDate = {\n    ...quote,\n    date: today,\n  };\n\n  localStorage.setItem('quoteOfTheDay', JSON.stringify(quoteWithDate));\n\n  return quoteWithDate;\n};\n\n// Render the quote of the day\nexport async function renderQuoteOfTheDay() {\n  try {\n    const quoteData = await handleGetQuoteOfTheDay();\n\n    const quoteTextEl = document.querySelector('.quote-api-text');\n    const quoteAuthorEl = document.querySelector('.quote-api-author');\n\n    if (quoteTextEl) {\n      quoteTextEl.textContent = quoteData.quote || 'No quote available';\n    }\n\n    if (quoteAuthorEl) {\n      quoteAuthorEl.textContent = quoteData.author || 'Unknown author';\n    }\n  } catch (error) {\n    console.error('Error rendering quote:', error);\n  }\n}\n","import '../css/header.css';\n\n// ---------- Mobile menu ----------\n\nconst burger = document.querySelector('.burger');\nconst mobileMenu = document.querySelector('.mobile-menu');\nconst closeBtn = document.querySelector('.mobile-menu__close');\n\nif (burger && mobileMenu && closeBtn) {\n  burger.addEventListener('click', () => {\n    mobileMenu.classList.add('open');\n    document.body.style.overflow = 'hidden';\n  });\n\n  closeBtn.addEventListener('click', () => {\n    mobileMenu.classList.remove('open');\n    document.body.style.overflow = '';\n  });\n\n  mobileMenu.addEventListener('click', e => {\n    if (e.target === mobileMenu) {\n      mobileMenu.classList.remove('open');\n      document.body.style.overflow = '';\n    }\n  });\n\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') {\n      mobileMenu.classList.remove('open');\n      document.body.style.overflow = '';\n    }\n  });\n}\n\n// ---------- Active links (desktop + mobile) ----------\n\nconst currentPath = window.location.pathname;\n\n// desktop pill\nconst navLinks = document.querySelectorAll('.nav-link');\nnavLinks.forEach(link => {\n  // link.pathname вже враховує /goit-advancedjs-hw-03/\n  if (link.pathname === currentPath) {\n    link.classList.add('nav-link--active');\n  }\n});\n\n// mobile menu links\nconst mobileLinks = document.querySelectorAll('.mobile-menu__links a');\nmobileLinks.forEach(link => {\n  if (link.pathname === currentPath) {\n    link.classList.add('mobile-link--active');\n  }\n\n  link.addEventListener('click', () => {\n    mobileMenu?.classList.remove('open');\n    document.body.style.overflow = '';\n  });\n});\n","export function createModalExerciseMarkup({\n  gifUrl,\n  name,\n  rating,\n  target,\n  bodyPart,\n  equipment,\n  popularity,\n  burnedCalories,\n  description,\n}) {\n  return `<section class=\"modal modal-exercise\">\n  <div class=\"modal-exercise-container\">\n    <img\n      src=\"${gifUrl}\"\n      alt=\"${name}\"\n      class=\"modal-exercise-img\"\n      width=\"360\"\n      height=\"360\"\n    />\n    <div class=\"modal-exercise-info-container\">\n      <button\n        type=\"button\"\n        class=\"modal-exercise-close-btn\"\n        data-modal-exercise=\"close\"\n      >\n        <svg class=\"modal-exercise-close-icon\">\n          <use href=\"./assets/icons/icons.svg#icon-x-white\"></use>\n        </svg>\n      </button>\n      <h3 class=\"modal-exercise-title\">${makeUpperCaseFirstLetter(name)}</h3>\n      <div class=\"modal-exercise-rating-container\">\n        <p class=\"modal-exercise-rating-number\">${rating}</p>\n      </div>\n      <div class=\"modal-exercise-tag-container\">\n        <ul class=\"modal-exercise-tag-list\">\n          <li>\n            <p class=\"modal-exercise-tag-key\">Target</p>\n            <p class=\"modal-exercise-tag-value\">${makeUpperCaseFirstLetter(\n              target\n            )}</p>\n          </li>\n          <li>\n            <p class=\"modal-exercise-tag-key\">Body Part</p>\n            <p class=\"modal-exercise-tag-value\">${makeUpperCaseFirstLetter(\n              bodyPart\n            )}</p>\n          </li>\n          <li>\n            <p class=\"modal-exercise-tag-key\">Equipment</p>\n            <p class=\"modal-exercise-tag-value\">${makeUpperCaseFirstLetter(\n              equipment\n            )}</p>\n          </li>\n          <li>\n            <p class=\"modal-exercise-tag-key\">Popular</p>\n            <p class=\"modal-exercise-tag-value\">${popularity}</p>\n          </li>\n          <li>\n            <p class=\"modal-exercise-tag-key\">Burned Calories</p>\n            <p class=\"modal-exercise-tag-value\">${burnedCalories}</p>\n          </li>\n        </ul>\n      </div>\n      <p class=\"modal-exercise-description\">${description}</p>\n    </div>\n  </div>\n  <ul class=\"modal-exercise-btn-list\">\n    <li>\n      <button type=\"button\" class=\"modal-exercise-btn add-to-favorites-btn js-add-to-favorites-btn\">\n        Add to favorites\n        <span>\n          <svg class=\"modal-exercise-heart-icon js-modal-exercise-heart-icon\">\n            <use href=\"./assets/icons/icons.svg#icon-heart\"></use></svg\n        ></span>\n      </button>\n    </li>\n    <li>\n      <button type=\"button\" class=\"modal-exercise-btn give-rating-btn js-give-rating-btn\">\n        Give a rating\n      </button>\n    </li>\n  </ul>\n</section>\n  `;\n}\n\nexport function createAddToFavoritesMarkup() {\n  return `\n  Add to favorites\n        <span>\n          <svg class=\"modal-exercise-heart-icon js-modal-exercise-heart-icon\">\n            <use href=\"./assets/icons/icons.svg#icon-heart\"></use></svg\n        ></span>`;\n}\n\nexport function createRemoveFromFavoritesMarkup() {\n  return `\n  Remove from favorites\n        <span>\n          <svg class=\"modal-exercise-trash-icon js-modal-exercise-trash-icon\">\n            <use href=\"./assets/icons/icons.svg#icon-trash\"></use></svg\n        ></span>\n  `;\n}\n\nfunction makeUpperCaseFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n","import * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nexport class ModalBox {\n  #closeKey = 'Escape';\n\n  options = {\n    onShow: instance => {\n      instance.element().querySelector(this.closeSelector).onclick =\n        instance.close;\n      document.addEventListener('keydown', this.handleCloseModalKeyDownBound);\n      document.body.style.overflow = 'hidden';\n    },\n    onClose: () => {\n      document.removeEventListener(\n        'keydown',\n        this.handleCloseModalKeyDownBound\n      );\n      document.body.style.overflow = 'auto';\n    },\n  };\n\n  constructor(markup, closeSelector, responceData) {\n    this.markup = markup;\n    this.closeSelector = closeSelector;\n    this.responceData = responceData;\n    this.handleCloseModalKeyDownBound = this.handleCloseModalKeyDown.bind(this);\n    this.build();\n  }\n\n  build() {\n    this.instance = basicLightbox.create(\n      this.markup(this.responceData),\n      this.options\n    );\n  }\n\n  open() {\n    this.instance.show();\n  }\n\n  handleCloseModalKeyDown(event) {\n    if (event.code === this.#closeKey) {\n      this.instance.close();\n    }\n  }\n\n  get closeKey() {\n    return this.#closeKey;\n  }\n\n  set closeKey(newCloseKey) {\n    this.#closeKey = newCloseKey;\n  }\n}\n","import { fetchExerciseModalById } from './api-functions.js';\nimport {\n  createModalExerciseMarkup,\n  createRemoveFromFavoritesMarkup,\n  createAddToFavoritesMarkup,\n} from './modal-exercise-markup.js';\nimport { ModalBox } from './modal-class-box.js';\n\nimport { openRatingModal } from './rating-modal.js';\n\nconst openModalSelector = '[data-modal-exercise=\"open\"]';\nconst closeModalSelector = '[data-modal-exercise=\"close\"]';\nconst FAVORITES_KEY = 'favorite_workouts';\n\nfunction readFavoritesFromStorage() {\n  const raw = localStorage.getItem(FAVORITES_KEY);\n  if (!raw) return [];\n\n  try {\n    const parsed = JSON.parse(raw);\n    return Array.isArray(parsed) ? parsed : [];\n  } catch (error) {\n    console.error('Failed to parse favorites from LS in modal:', error);\n    localStorage.removeItem(FAVORITES_KEY);\n    return [];\n  }\n}\n\nfunction saveFavoritesToStorage(favorites) {\n  localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n}\n\nfunction isExerciseInFavorites(exerciseId) {\n  const favorites = readFavoritesFromStorage();\n  return favorites.some(item => item._id === exerciseId);\n}\n\ndocument.addEventListener('click', event => {\n  if (event.target.matches(openModalSelector)) {\n    const exerciseId = event.target.dataset.exerciseId;\n    handleOpenModalClick(exerciseId);\n  }\n});\n\nasync function handleOpenModalClick(exerciseId) {\n  let modalBox = {};\n\n  const favoriteId = exerciseId || '64f389465ae26083f39b17a2';\n\n  try {\n    const exerciseData = await fetchExerciseModalById(favoriteId);\n\n    modalBox = new ModalBox(\n      createModalExerciseMarkup,\n      closeModalSelector,\n      exerciseData\n    );\n\n    modalBox.open();\n\n    setupModalEventListeners(modalBox, exerciseData);\n  } catch (error) {\n    console.error('Error loading exercise data:', error);\n  }\n}\n\nfunction setupModalEventListeners(modalBox, exerciseData) {\n  const modalElement = modalBox.instance.element();\n  const giveRatingBtnRef = modalElement.querySelector('.js-give-rating-btn');\n  const addToFavoriteBtnRef = modalElement.querySelector(\n    '.js-add-to-favorites-btn'\n  );\n\n  if (giveRatingBtnRef) {\n    giveRatingBtnRef.addEventListener('click', () =>\n      handleGiveRatingBtnClick(exerciseData._id, modalBox)\n    );\n  }\n\n  if (addToFavoriteBtnRef) {\n    addToFavoriteBtnRef.addEventListener('click', event =>\n      handleAddToFavoriteBtnClick(event, exerciseData, addToFavoriteBtnRef)\n    );\n\n    if (isExerciseInFavorites(exerciseData._id)) {\n      addToFavoriteBtnRef.innerHTML = createRemoveFromFavoritesMarkup();\n    } else {\n      addToFavoriteBtnRef.innerHTML = createAddToFavoritesMarkup();\n    }\n  }\n}\n\nfunction handleGiveRatingBtnClick(exerciseId, modalBox) {\n  openRatingModal(exerciseId, modalBox);\n}\n\nfunction handleAddToFavoriteBtnClick(_, exerciseData, addToFavoriteBtnRef) {\n  const favorites = readFavoritesFromStorage();\n  const exists = favorites.some(item => item._id === exerciseData._id);\n\n  if (exists) {\n    processRemovalsFromFavorites(\n      exerciseData._id,\n      addToFavoriteBtnRef,\n      favorites\n    );\n    return;\n  }\n\n  processAddingToFavorites(exerciseData, addToFavoriteBtnRef, favorites);\n}\n\nfunction processAddingToFavorites(\n  exerciseData,\n  addToFavoriteBtnRef,\n  favorites\n) {\n  addToFavoriteBtnRef.innerHTML = createRemoveFromFavoritesMarkup();\n\n  const minifiedExercise = {\n    _id: exerciseData._id,\n    time: exerciseData.time,\n    target: exerciseData.target,\n    name: exerciseData.name,\n    burnedCalories: exerciseData.burnedCalories,\n    bodyPart: exerciseData.bodyPart,\n  };\n\n  favorites.push(minifiedExercise);\n  saveFavoritesToStorage(favorites);\n}\n\nfunction processRemovalsFromFavorites(\n  exerciseId,\n  addToFavoriteBtnRef,\n  favorites\n) {\n  const newFavorites = favorites.filter(item => item._id !== exerciseId);\n\n  if (newFavorites.length === 0) {\n    localStorage.removeItem(FAVORITES_KEY);\n  } else {\n    saveFavoritesToStorage(newFavorites);\n  }\n\n  addToFavoriteBtnRef.innerHTML = createAddToFavoritesMarkup();\n}\n"],"names":["axios","fetchCategories","filter","page","limit","fetchExercises","currentFilter","currentCategory","keyword","fetchExerciseModalById","id","sendRating","ratingData","RATING_MODAL_SELECTOR","RATING_FORM_SELECTOR","refs","currentExerciseId","modalExerciseInstance","currentRating","openRatingModal","exerciseId","modalBoxInstance","resetRating","closeRatingModal","updateRatingValue","rating","handleStarChange","event","radio","handleFormSubmit","formData","email","review","iziToast","error","errorMessage","evt","getQuoteOfTheDay","data","getTodayDate","handleGetQuoteOfTheDay","storedQuote","today","quoteWithDate","renderQuoteOfTheDay","quoteData","quoteTextEl","quoteAuthorEl","burger","mobileMenu","closeBtn","currentPath","navLinks","link","mobileLinks","createModalExerciseMarkup","gifUrl","name","target","bodyPart","equipment","popularity","burnedCalories","description","makeUpperCaseFirstLetter","createAddToFavoritesMarkup","createRemoveFromFavoritesMarkup","str","ModalBox","#closeKey","instance","markup","closeSelector","responceData","basicLightbox.create","newCloseKey","openModalSelector","closeModalSelector","FAVORITES_KEY","readFavoritesFromStorage","raw","parsed","saveFavoritesToStorage","favorites","isExerciseInFavorites","item","handleOpenModalClick","modalBox","favoriteId","exerciseData","setupModalEventListeners","modalElement","giveRatingBtnRef","addToFavoriteBtnRef","handleGiveRatingBtnClick","handleAddToFavoriteBtnClick","_","processRemovalsFromFavorites","processAddingToFavorites","minifiedExercise","newFavorites"],"mappings":"6vBACAA,EAAM,SAAS,QAAU,wCAElB,eAAeC,EACpBC,EAAS,UACTC,EAAO,IACPC,EAAQ,KACR,CAQA,OAPiB,MAAMJ,EAAM,IAAI,WAAY,CAC3C,OAAQ,CACN,OAAAE,EACA,KAAAC,EACA,MAAAC,CACN,CACA,CAAG,GACe,IAClB,CAEO,eAAeC,GACpBC,EACAC,EACAC,EACAL,EAAO,EACPC,EAAQ,GACR,CAaA,OAZiB,MAAMJ,EAAM,IAAI,aAAc,CAC7C,OAAQ,CACN,CAACM,IAAkB,aACf,WACAA,EAAc,YAAW,CAAE,EAAGC,EAC/B,YAAW,EACX,QAAQ,IAAK,KAAK,EACrB,QAAAC,EACA,KAAAL,EACA,MAAAC,CACN,CACA,CAAG,GACe,IAClB,CAEO,eAAeK,EAAuBC,EAAK,2BAA4B,CAE5E,OADiB,MAAMV,EAAM,IAAI,cAAcU,CAAE,EAAE,GACnC,IAClB,CAEO,eAAeC,EAAWD,EAAIE,EAAY,CAG7C,OADiB,MAAMZ,EAAM,MAAM,cAAcU,CAAE,UAAWE,CAAU,GACxD,IACpB,CC9CA,MAAMC,EAAwB,sBACxBC,EAAuB,qBAEvBC,EAAO,CACX,oBAAqB,SAAS,cAAcF,CAAqB,EACjE,oBAAqB,SAAS,cAAc,2BAA2B,EACvE,WAAY,SAAS,cAAcC,CAAoB,EACvD,YAAa,SAAS,cAAc,eAAe,EACnD,gBAAiB,SAAS,cAAc,eAAe,EACvD,aAAc,SAAS,iBAAiB,eAAe,CACzD,EAEA,IAAIE,EAAoB,KACpBC,EAAwB,KACxBC,EAAgB,EAEb,SAASC,EAAgBC,EAAYC,EAAkB,CACvDN,EAAK,sBAEVC,EAAoBI,EACpBH,EAAwBI,EAEpBJ,GAAyBI,EAAiB,UAC5CA,EAAiB,SAAS,MAAK,EAGjCN,EAAK,oBAAoB,UAAU,OAAO,WAAW,EACrD,SAAS,KAAK,MAAM,SAAW,SAE/BO,EAAW,EACb,CAEA,SAASC,GAAmB,CACrBR,EAAK,sBAEVA,EAAK,oBAAoB,UAAU,IAAI,WAAW,EAClD,SAAS,KAAK,MAAM,SAAW,GAE3BE,GAAyBA,EAAsB,UACjDA,EAAsB,SAAS,KAAI,EAGrCD,EAAoB,KACpBC,EAAwB,KACxBC,EAAgB,EAChBH,EAAK,WAAW,MAAK,EACvB,CAEA,SAASS,EAAkBC,EAAQ,CACjCV,EAAK,gBAAgB,YAAcU,EAAO,QAAQ,CAAC,EACnDP,EAAgBO,CAClB,CAEA,SAASC,EAAiBC,EAAO,CAC/B,GAAIA,EAAM,OAAO,OAAS,SAAU,CAClC,MAAMF,EAAS,WAAWE,EAAM,OAAO,KAAK,EAC5CH,EAAkBC,CAAM,CAC1B,CACF,CAEA,SAASH,GAAc,CACjBP,EAAK,aAAa,OAAS,GAC7BA,EAAK,aAAa,QAAQa,GAAUA,EAAM,QAAU,EAAM,EAE5DJ,EAAkB,CAAG,CACvB,CAEA,eAAeK,EAAiBF,EAAO,CACrCA,EAAM,eAAc,EAEpB,MAAMG,EAAW,IAAI,SAASH,EAAM,aAAa,EAC3CI,EAAQD,EAAS,IAAI,OAAO,EAAE,KAAI,EAClCE,EAASF,EAAS,IAAI,QAAQ,EAAE,KAAI,EAE1C,GAAIZ,IAAkB,EAAG,CACvBe,EAAS,MAAM,CACb,QAAS,0CACT,SAAU,UAChB,CAAK,EACD,MACF,CAEA,GAAI,CAACF,EAAO,CACVE,EAAS,MAAM,CACb,QAAS,+BACT,SAAU,UAChB,CAAK,EACD,MACF,CAEA,GAAI,CAAC,+CAA+C,KAAKF,CAAK,EAAG,CAC/DE,EAAS,MAAM,CACb,QAAS,sCACT,SAAU,UAChB,CAAK,EACD,MACF,CAEA,MAAMrB,EAAa,CACjB,KAAMM,EACN,MAAOa,EACP,OAAQC,GAAU,EACtB,EAEE,GAAI,CACF,MAAMrB,EAAWK,EAAmBJ,CAAU,EAE9CqB,EAAS,QAAQ,CACf,QAAS,yDACT,SAAU,UAChB,CAAK,EAEDV,EAAgB,CAClB,OAASW,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChD,IAAIC,EAAe,6CAEfD,EAAM,UAAYA,EAAM,SAAS,SAAW,MAC9CC,EAAe,yCAGjBF,EAAS,MAAM,CACb,QAASE,EACT,SAAU,UAChB,CAAK,CACH,CACF,CAEIpB,EAAK,aACPA,EAAK,YAAY,iBAAiB,SAAUW,CAAgB,EAG1DX,EAAK,YACPA,EAAK,WAAW,iBAAiB,SAAUc,CAAgB,EAGzDd,EAAK,qBACPA,EAAK,oBAAoB,iBAAiB,QAASQ,CAAgB,EAGjER,EAAK,qBACPA,EAAK,oBAAoB,iBAAiB,QAASqB,GAAO,CACpDA,EAAI,SAAWrB,EAAK,qBACtBQ,EAAgB,CAEpB,CAAC,EAGH,SAAS,iBAAiB,UAAWa,GAAO,CAExCA,EAAI,MAAQ,UACZrB,EAAK,qBACL,CAACA,EAAK,oBAAoB,UAAU,SAAS,WAAW,GAExDQ,EAAgB,CAEpB,CAAC,EC7JDvB,EAAM,SAAS,QAAU,wCAGlB,MAAMqC,EAAmB,SAAY,CAC1C,GAAI,CACF,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMtC,EAAM,IAAI,QAAQ,EACzC,eAAQ,IAAI,kBAAmBsC,CAAI,EAC5BA,CACT,OAASJ,EAAO,CACd,cAAQ,MAAM,wBAAyBA,CAAK,EACtCA,CACR,CACF,EAGaK,EAAe,IACnB,IAAI,KAAI,EAAG,YAAW,EAAG,MAAM,GAAG,EAAE,CAAC,EAIjCC,EAAyB,SAAY,CAChD,MAAMC,EAAc,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,EAC9DC,EAAQH,EAAY,EAE1B,GAAIE,GAAeA,EAAY,OAASC,EACtC,eAAQ,IAAI,8BAA+BD,CAAW,EAC/CA,EAIT,MAAME,EAAgB,CACpB,GAHY,MAAMN,EAAgB,EAIlC,KAAMK,CACV,EAEE,oBAAa,QAAQ,gBAAiB,KAAK,UAAUC,CAAa,CAAC,EAE5DA,CACT,EAGO,eAAeC,IAAsB,CAC1C,GAAI,CACF,MAAMC,EAAY,MAAML,EAAsB,EAExCM,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAgB,SAAS,cAAc,mBAAmB,EAE5DD,IACFA,EAAY,YAAcD,EAAU,OAAS,sBAG3CE,IACFA,EAAc,YAAcF,EAAU,QAAU,iBAEpD,OAASX,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,CAC/C,CACF,CCxDA,MAAMc,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAW,SAAS,cAAc,qBAAqB,EAEzDF,GAAUC,GAAcC,IAC1BF,EAAO,iBAAiB,QAAS,IAAM,CACrCC,EAAW,UAAU,IAAI,MAAM,EAC/B,SAAS,KAAK,MAAM,SAAW,QACjC,CAAC,EAEDC,EAAS,iBAAiB,QAAS,IAAM,CACvCD,EAAW,UAAU,OAAO,MAAM,EAClC,SAAS,KAAK,MAAM,SAAW,EACjC,CAAC,EAEDA,EAAW,iBAAiB,QAAS,GAAK,CACpC,EAAE,SAAWA,IACfA,EAAW,UAAU,OAAO,MAAM,EAClC,SAAS,KAAK,MAAM,SAAW,GAEnC,CAAC,EAED,SAAS,iBAAiB,UAAW,GAAK,CACpC,EAAE,MAAQ,WACZA,EAAW,UAAU,OAAO,MAAM,EAClC,SAAS,KAAK,MAAM,SAAW,GAEnC,CAAC,GAKH,MAAME,EAAc,OAAO,SAAS,SAG9BC,EAAW,SAAS,iBAAiB,WAAW,EACtDA,EAAS,QAAQC,GAAQ,CAEnBA,EAAK,WAAaF,GACpBE,EAAK,UAAU,IAAI,kBAAkB,CAEzC,CAAC,EAGD,MAAMC,EAAc,SAAS,iBAAiB,uBAAuB,EACrEA,EAAY,QAAQD,GAAQ,CACtBA,EAAK,WAAaF,GACpBE,EAAK,UAAU,IAAI,qBAAqB,EAG1CA,EAAK,iBAAiB,QAAS,IAAM,CACnCJ,GAAY,UAAU,OAAO,MAAM,EACnC,SAAS,KAAK,MAAM,SAAW,EACjC,CAAC,CACH,CAAC,EC1DM,SAASM,EAA0B,CACxC,OAAAC,EACA,KAAAC,EACA,OAAAhC,EACA,OAAAiC,EACA,SAAAC,EACA,UAAAC,EACA,WAAAC,EACA,eAAAC,EACA,YAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA;AAAA,aAGIP,CAAM;AAAA,aACNC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCAewBO,EAAyBP,CAAI,CAAC;AAAA;AAAA,kDAErBhC,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAMNuC,EACpCN,CACd,CAAa;AAAA;AAAA;AAAA;AAAA,kDAIqCM,EACpCL,CACd,CAAa;AAAA;AAAA;AAAA;AAAA,kDAIqCK,EACpCJ,CACd,CAAa;AAAA;AAAA;AAAA;AAAA,kDAIqCC,CAAU;AAAA;AAAA;AAAA;AAAA,kDAIVC,CAAc;AAAA;AAAA;AAAA;AAAA,8CAIlBC,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAqBzD,CAEO,SAASE,GAA6B,CAC3C,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMT,CAEO,SAASC,GAAkC,CAChD,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAOT,CAEA,SAASF,EAAyBG,EAAK,CACrC,OAAOA,EAAI,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAI,MAAM,CAAC,CAClD,CCzGO,MAAMC,CAAS,CACpBC,GAAY,SAEZ,QAAU,CACR,OAAQC,GAAY,CAClBA,EAAS,QAAO,EAAG,cAAc,KAAK,aAAa,EAAE,QACnDA,EAAS,MACX,SAAS,iBAAiB,UAAW,KAAK,4BAA4B,EACtE,SAAS,KAAK,MAAM,SAAW,QACjC,EACA,QAAS,IAAM,CACb,SAAS,oBACP,UACA,KAAK,4BACb,EACM,SAAS,KAAK,MAAM,SAAW,MACjC,CACJ,EAEE,YAAYC,EAAQC,EAAeC,EAAc,CAC/C,KAAK,OAASF,EACd,KAAK,cAAgBC,EACrB,KAAK,aAAeC,EACpB,KAAK,6BAA+B,KAAK,wBAAwB,KAAK,IAAI,EAC1E,KAAK,MAAK,CACZ,CAEA,OAAQ,CACN,KAAK,SAAWC,EAAAA,OACd,KAAK,OAAO,KAAK,YAAY,EAC7B,KAAK,OACX,CACE,CAEA,MAAO,CACL,KAAK,SAAS,KAAI,CACpB,CAEA,wBAAwB/C,EAAO,CACzBA,EAAM,OAAS,KAAK0C,IACtB,KAAK,SAAS,MAAK,CAEvB,CAEA,IAAI,UAAW,CACb,OAAO,KAAKA,EACd,CAEA,IAAI,SAASM,EAAa,CACxB,KAAKN,GAAYM,CACnB,CACF,CC5CA,MAAMC,EAAoB,+BACpBC,EAAqB,gCACrBC,EAAgB,oBAEtB,SAASC,GAA2B,CAClC,MAAMC,EAAM,aAAa,QAAQF,CAAa,EAC9C,GAAI,CAACE,EAAK,MAAO,CAAA,EAEjB,GAAI,CACF,MAAMC,EAAS,KAAK,MAAMD,CAAG,EAC7B,OAAO,MAAM,QAAQC,CAAM,EAAIA,EAAS,CAAA,CAC1C,OAAS/C,EAAO,CACd,eAAQ,MAAM,8CAA+CA,CAAK,EAClE,aAAa,WAAW4C,CAAa,EAC9B,CAAA,CACT,CACF,CAEA,SAASI,EAAuBC,EAAW,CACzC,aAAa,QAAQL,EAAe,KAAK,UAAUK,CAAS,CAAC,CAC/D,CAEA,SAASC,EAAsBhE,EAAY,CAEzC,OADkB2D,EAAwB,EACzB,KAAKM,GAAQA,EAAK,MAAQjE,CAAU,CACvD,CAEA,SAAS,iBAAiB,QAASO,GAAS,CAC1C,GAAIA,EAAM,OAAO,QAAQiD,CAAiB,EAAG,CAC3C,MAAMxD,EAAaO,EAAM,OAAO,QAAQ,WACxC2D,EAAqBlE,CAAU,CACjC,CACF,CAAC,EAED,eAAekE,EAAqBlE,EAAY,CAC9C,IAAImE,EAAW,CAAA,EAEf,MAAMC,EAAapE,GAAc,2BAEjC,GAAI,CACF,MAAMqE,EAAe,MAAMhF,EAAuB+E,CAAU,EAE5DD,EAAW,IAAInB,EACbb,EACAsB,EACAY,CACN,EAEIF,EAAS,KAAI,EAEbG,EAAyBH,EAAUE,CAAY,CACjD,OAASvD,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CACF,CAEA,SAASwD,EAAyBH,EAAUE,EAAc,CACxD,MAAME,EAAeJ,EAAS,SAAS,QAAO,EACxCK,EAAmBD,EAAa,cAAc,qBAAqB,EACnEE,EAAsBF,EAAa,cACvC,0BACJ,EAEMC,GACFA,EAAiB,iBAAiB,QAAS,IACzCE,EAAyBL,EAAa,IAAKF,CAAQ,CACzD,EAGMM,IACFA,EAAoB,iBAAiB,QAASlE,GAC5CoE,EAA4BpE,EAAO8D,EAAcI,CAAmB,CAC1E,EAEQT,EAAsBK,EAAa,GAAG,EACxCI,EAAoB,UAAY3B,EAA+B,EAE/D2B,EAAoB,UAAY5B,EAA0B,EAGhE,CAEA,SAAS6B,EAAyB1E,EAAYmE,EAAU,CACtDpE,EAAgBC,EAAYmE,CAAQ,CACtC,CAEA,SAASQ,EAA4BC,EAAGP,EAAcI,EAAqB,CACzE,MAAMV,EAAYJ,EAAwB,EAG1C,GAFeI,EAAU,KAAKE,GAAQA,EAAK,MAAQI,EAAa,GAAG,EAEvD,CACVQ,EACER,EAAa,IACbI,EACAV,CACN,EACI,MACF,CAEAe,EAAyBT,EAAcI,EAAqBV,CAAS,CACvE,CAEA,SAASe,EACPT,EACAI,EACAV,EACA,CACAU,EAAoB,UAAY3B,EAA+B,EAE/D,MAAMiC,EAAmB,CACvB,IAAKV,EAAa,IAClB,KAAMA,EAAa,KACnB,OAAQA,EAAa,OACrB,KAAMA,EAAa,KACnB,eAAgBA,EAAa,eAC7B,SAAUA,EAAa,QAC3B,EAEEN,EAAU,KAAKgB,CAAgB,EAC/BjB,EAAuBC,CAAS,CAClC,CAEA,SAASc,EACP7E,EACAyE,EACAV,EACA,CACA,MAAMiB,EAAejB,EAAU,OAAOE,GAAQA,EAAK,MAAQjE,CAAU,EAEjEgF,EAAa,SAAW,EAC1B,aAAa,WAAWtB,CAAa,EAErCI,EAAuBkB,CAAY,EAGrCP,EAAoB,UAAY5B,EAA0B,CAC5D"}