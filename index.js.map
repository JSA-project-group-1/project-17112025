{"version":3,"file":"index.js","sources":["../src/js/api-functions.js","../src/js/render-functions.js","../src/js/footer-subscription.js","../src/js/main-home.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://your-energy.b.goit.study/api/';\n\nexport async function fetchCategories(filter = 'Muscles', page = '1', limit = '12') {\n  const response = await axios.get(\n    `/filters`, {\n    params: {\n      filter,\n      page,\n      limit,\n    }\n  }\n  )\n  return response.data;\n}\n\nexport async function fetchExercises(currentFilter,\n  currentCategory,\n  keyword,\n  page = 1,\n  limit = 10,) {\n  const response = await axios.get(\n    `/exercises`, {\n    params: {\n      [currentFilter === \"Body parts\" ? \"bodypart\" : currentFilter.toLowerCase()]: currentCategory.toLowerCase().replace(' ', '%20'),\n      keyword,\n      page,\n      limit,\n    }\n  }\n  )\n  return response.data;\n}\n\n// https://your-energy.b.goit.study/api/filters?filter=Muscles&page=1&limit=12\n// https://your-energy.b.goit.study/api/exercises?bodypart=back&muscles=lats&equipment=barbell&keyword=pull&page=1&limit=10","export function renderCategories(categories, list) {\n  const markup = categories\n    .map(({ filter, imgURL, name }) => {\n      return `\n          <li class=\"categories-item\" data-name=\"${name}\">\n            <img\n            class=\"category-image\"\n            src=\"${imgURL}\"\n            alt=\"${name}\"\n          />\n          <div class=\"categories-item-info\">\n            <h3>${name}</h3>\n            <p>${filter}</p>\n            </div>\n          </li>\n      `;\n    })\n    .join('');\n  list.innerHTML = markup;\n}\n\nexport function renderExercises(exercises, list) {\n  const markup = exercises\n    .map(({ _id, name, target, bodyPart, burnedCalories, rating }) => {\n      return `\n    <li class=\"exercises-item\">\n    <div class=\"header\">\n        <div class = \"workout-rating\">\n        <span class=\"type\">WORKOUT</span>\n        <span class=\"rating\">${rating} </span>\n        </div>\n        <button class=\"start-btn\" type=\"button\"> Start </button>\n    </div>\n    <div class=\"title\">\n        <span class=\"icon\">icon</span> ${name}\n    </div>\n    <div class=\"details\">\n        <ul class=\"exercise-details-list\">\n          <li class=\"calories\">\n            <span class=\"calories-name\">Burned calories</span>\n            <span class=\"calories-value\">${burnedCalories} / 3 min</span>\n          </li>\n          <li class=\"body-part\">\n            <span class=\"body-part-name\">Body part:</span> \n            <span class=\"body-part-value\">${bodyPart}</span>\n          </li>\n          <li class=\"target\">\n          <span class=\"target-name\">Target:</span>\n          <span class=\"target-value\">${target}</span>\n          </li>\n        </ul>\n    </div>\n    </li>\n      `;\n    })\n    .join('');\n  list.innerHTML = markup;\n}\n\nexport function renderPagination(pages, activePage, list) {\n  const pagesData = Array.from({ length: pages }, (_, i) => i + 1);\n  const markup = pagesData\n    .map(page => {\n      return `\n          <li class=\"pagination-control-item\">\n            <button class=\"${\n              activePage === page\n                ? 'pagination-control-active'\n                : 'pagination-control'\n            }\">${page}</button>\n          </li>\n      `;\n    })\n    .join('');\n  list.innerHTML = markup;\n}\n\nexport function renderFilter(options, activeOption, list) {\n  const markup = options\n    .map(option => {\n      return `\n          <li class=\"filters-list-item ${\n            activeOption === option ? 'filters-list-item-active' : ''\n          }\" data-option=\"${option}\"><p>${option}</p></li>\n      `;\n    })\n    .join('');\n  list.innerHTML = markup;\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.getElementById('footerSubscribeForm');\n\nif (form) {\n  const emailInput = form.querySelector('input[name=\"email\"]');\n  const submitBtn = form.querySelector('button[type=\"submit\"]');\n\n  form.addEventListener('submit', handleSubscribe);\n\n  async function handleSubscribe(event) {\n    event.preventDefault();\n\n    const emailValue = emailInput.value.trim();\n\n    if (!isValidEmail(emailValue)) {\n      showError('Invalid email address');\n      return;\n    }\n\n    try {\n      submitBtn.disabled = true;\n\n      const response = await axios.post(\n        'https://your-energy.b.goit.study/api/subscription',\n        { email: emailValue },\n        {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        }\n      );\n\n      if (response.status === 201) {\n        showSuccess(response.data.message);\n        form.reset();\n      }\n    } catch (error) {\n      if (error.response) {\n        showError(error.response.data.message || 'Subscription failed');\n      } else {\n        showError('Network error. Please try again.');\n      }\n    } finally {\n      submitBtn.disabled = false;\n    }\n  }\n\n  function isValidEmail(email) {\n    const emailRegex = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n    return emailRegex.test(email);\n  }\n\n  function showSuccess(message) {\n    iziToast.success({\n      title: 'Success',\n      message: message,\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n\n  function showError(message) {\n    iziToast.error({\n      title: 'Error',\n      message: message,\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { fetchCategories, fetchExercises } from \"./api-functions\"\nimport { renderCategories, renderExercises, renderPagination, renderFilter } from \"./render-functions\";\nimport './footer-subscription.js';\n\nimport '/css/pages/home.css';\nimport './header.js';\n\n\nconst filterOptions = [\"Muscles\", \"Body parts\", \"Equipment\"]\nconst mobileBreakpoint = 375;\nconst filtersList = document.querySelector(\"ul.filters-list\");\nconst categoriesList = document.querySelector(\"ul.block-categories-list\");\nconst exercisesList = document.querySelector(\"ul.exercises-list\");\nconst paginationList = document.querySelector(\"ul.pagination-controls-list\");\nconst loader = document.querySelector(\"span.loader\");\nconst searchForm = document.querySelector(\"form.search-form\");\nconst searchInput = searchForm.querySelector(\".search-input\");\nconst clearBtn = document.querySelector(\"button.clear-btn\");\n\nconst isMobile = document.documentElement.clientWidth <= mobileBreakpoint;\n\nlet currentFilter = filterOptions[0]\nlet currentCategory = ''\nlet searchQuery = \"\"\nlet currentPage = 1;\nlet categoriesPerPage = isMobile ? 9 : 12;\nlet exercisesPerPage = isMobile ? 8 : 10;\n\n\nsearchForm.addEventListener(\"input\", (evt) => {\n  searchQuery = evt.target.value;\n  if (searchQuery.length) {\n    clearBtn.classList.remove('visually-hidden');\n  } else {\n    clearBtn.classList.add('visually-hidden');\n  }\n});\n\nsearchForm.addEventListener(\"submit\", async (evt) => {\n  evt.preventDefault();\n  console.log(searchQuery)\n  const exercises = await fetchExercises(currentFilter, currentCategory, searchQuery, currentPage, exercisesPerPage)\n  const { results, page, totalPages } = exercises;\n  paginationList.innerHTML = '';\n  renderExercises(results, exercisesList)\n  renderPagination(Number(totalPages), Number(page), paginationList)\n\n});\n\nclearBtn.addEventListener('click', () => {\n  searchQuery = \"\"\n  clearBtn.classList.add('visually-hidden');\n  searchInput.value = \"\";\n  renderExercises(results, exercisesList)\n  renderPagination(Number(totalPages), Number(page), paginationList)\n});\n\n\n\nasync function loadAndRenderCategoriesList() {\n  categoriesList.innerHTML = '';\n  exercisesList.innerHTML = '';\n  paginationList.innerHTML = '';\n  loader.classList.remove('visually-hidden');\n  try {\n    const categories = await fetchCategories(currentFilter, currentPage, categoriesPerPage);\n    const { results, page, totalPages } = categories;\n    renderCategories(results, categoriesList)\n    renderPagination(Number(totalPages), Number(page), paginationList)\n    loader.classList.add('visually-hidden');\n  }\n  catch (error) {\n    loader.classList.add('visually-hidden');\n    iziToast.error({\n      icon: '',\n      position: 'topRight',\n      message: error.message\n    })\n  }\n}\n\nfiltersList.addEventListener('click', onFiltersListClick);\n\nfunction onFiltersListClick(event) {\n  const clickedItem = event.target.closest('.filters-list-item');\n  if (clickedItem) {\n    const filterOption = clickedItem.dataset.option;\n    currentFilter = filterOption\n    renderFilter(filterOptions, currentFilter, filtersList)\n    loadAndRenderCategoriesList()\n    searchForm.classList.add('visually-hidden');\n  }\n}\n\ncategoriesList.addEventListener('click', onCategoryClick);\n\nasync function onCategoryClick(event) {\n  const clickedItem = event.target.closest('.categories-item');\n  if (clickedItem) {\n    currentCategory = clickedItem.dataset.name;\n    console.log(currentFilter, currentCategory);\n\n    const exercises = await fetchExercises(currentFilter, currentCategory, '', currentPage, exercisesPerPage)\n    console.log(exercises);\n    const { results, page, totalPages } = exercises;\n    categoriesList.innerHTML = '';\n    paginationList.innerHTML = '';\n    renderExercises(results, exercisesList)\n    renderPagination(Number(totalPages), Number(page), paginationList)\n    searchForm.classList.remove('visually-hidden');\n  }\n}\n\n\nrenderFilter(filterOptions, currentFilter, filtersList)\nloadAndRenderCategoriesList()\n\n"],"names":["axios","fetchCategories","filter","page","limit","fetchExercises","currentFilter","currentCategory","keyword","renderCategories","categories","list","markup","imgURL","name","renderExercises","exercises","_id","target","bodyPart","burnedCalories","rating","renderPagination","pages","activePage","_","i","renderFilter","options","activeOption","option","form","isValidEmail","email","showSuccess","message","iziToast","showError","emailInput","submitBtn","handleSubscribe","event","emailValue","response","error","filterOptions","mobileBreakpoint","filtersList","categoriesList","exercisesList","paginationList","loader","searchForm","searchInput","clearBtn","isMobile","searchQuery","currentPage","categoriesPerPage","exercisesPerPage","evt","results","totalPages","loadAndRenderCategoriesList","onFiltersListClick","clickedItem","onCategoryClick"],"mappings":"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"}